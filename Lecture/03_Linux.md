# 리눅스 사용법 요약

## 리눅스 쉘 사용법 이해 (리눅스 파일 시스템 및 사용자 관리)

### 리눅스와 파일

- 모든것은 파일이라는 철학을 따름
    - 하드웨어등도 다 파일로 처리함 
        - 파일? 
            - 읽고 쓸 수 있다. 
    - 모든 인터렉션은 파일을 읽고, 쓰는 것처럼 이루어져 있음
    - 마우스, 키보드와 같은 모든 디바이스 관련된 기술도 파일과 같이 다뤄짐
- 파일 네임스페이스
    - A드라이브 (A:/), C드라이브 (C:/windows) (x)
    - 전역 네임스페이스 사용
        - /media/floofy/deve.jpg

### 쉘

- 쉘(shell) : 사용자가 컴퓨터 하드웨어 또는 운영체제간 인터페이스
    - 사용자의 명령을 해석해서, 커널에 명령을 요청해주는 역할
    - 관련된 시스템콜을 사용해서 프로그래밍이 작성되어 있다.
- GUI, CLI 모두 shell이라고 볼 수 있다. 
- 보통 CLI shell은 이름이 있는데, 여러가지 이름이 있다. 
    - Mac은 zsh 등

#### 쉘 종류

- Bourne-Again Shell(bash) : GNU 프로젝트의 일환으로 개발됨, 리눅스 거의 bash를 default로 사용함 ! 
- Bourne Shell (sh)
    - 기본 쉘 
- C Shell (csh)
- Korn Shell (ksh) : 유닉스에서 가장 많이 사용됨 
- 등등.. 

### 리눅스 기본 명령어 정리

- 리눅스 명령어는 결국 쉘이 제공하는 명령어이다.
- 리눅스 기본 쉘이 bash이므로, bash에서 제공하는 기본 명령어를 알 필요가 있음

#### 로그인

```
ssh -i docker.pem ubuntu@3.34.156.196
```

- 3.34.156.196에 ubuntu라는 id로 로그인하기 
- pem키는 AWS에서 발급받은 키 

#### whoami : 로그인한 사용자 ID

```
ubuntu@ip-172-31-42-165:~$ whoami
ubuntu
```

- Linux나 Unix계열은 컴퓨터 한대에 여러명이 다중사용하는 것에 특화되어있는 운영체제이다.
- 따라서 로그인을 해서 들어가면 ID가 있음. 
- window에는 슈퍼 사용자가 있는데, 대부분 개인 pc이기 때문에 본인 계정이 super user이다.
- Linux에는 root가 superuser이다.
    - 하지만, 다중사용자가 사용하기 때문에 super관리자인 root로 명령을 실행하면 모든게 허용되며 복구되지 않을 가능성이 있다.
    - ex) ```rm -rf *```라고 입력하면 모든게 다 삭제되지만 alert이 없다.  
- root : 슈퍼 관리자 ID 

#### sudo 명령어 : root 권한으로 실행

- root 계정으로 로그인하지 않은 상태에서 root 권한이 필요한 명령을 실행할 수 있도록 하는 프로그램

- window로 치면 관리자 권한으로 실행하기의 역할 

- 기본 사용법

    - sudo 명령어

- 사용 예 

    - ```sudo apt-get update ```
    - 리눅스 여러 패키지 중 우리는 ubuntu를 사용하는데, 각각 프로그램이 수시로 업데이트 된다. 
    - 그런 프로그램이 어딘가에 저장되어 있는데, sudo apt-get update는 패키지의 최신 정보를 업데이트한 명령이다.
    - 이 update된 최신 버전으로 패키지 업데이트 및 최신버전을 설치 할 수 있다.

    

#### pwd : 현재 디렉토리 위치

 ```
 ubuntu@ip-172-31-42-165:~$ pwd
 /home/ubuntu
 ubuntu@ip-172-31-42-165:~$ cd ..
 ubuntu@ip-172-31-42-165:/home$ pwd
 /home
 ```

#### ls : 파일 목록 출력 

```
ubuntu@ip-172-31-42-165:~$ ls

ubuntu@ip-172-31-42-165:~$ ls -a 
.   .bash_logout  .cache    .ssh
..  .bashrc       .profile  .sudo_as_admin_successful

ubuntu@ip-172-31-42-165:~$ ls -al
total 28
drwxr-xr-x 4 ubuntu ubuntu 4096 Aug 25 13:20 .
drwxr-xr-x 3 root   root   4096 Aug 25 09:47 ..
-rw-r--r-- 1 ubuntu ubuntu  220 Feb 25  2020 .bash_logout
-rw-r--r-- 1 ubuntu ubuntu 3771 Feb 25  2020 .bashrc
drwx------ 2 ubuntu ubuntu 4096 Aug 25 11:08 .cache
-rw-r--r-- 1 ubuntu ubuntu  807 Feb 25  2020 .profile
drwx------ 2 ubuntu ubuntu 4096 Aug 25 09:47 .ssh
-rw-r--r-- 1 ubuntu ubuntu    0 Aug 25 13:20 .sudo_as_admin_successful  
```

- ls -a
    - 숨김파일 출력 
- ls -al
    - 현재폴더와 상위폴더가 나오고 숨김파일과 권한까지 출력 



#### 리눅스와 권한

- 운영체제는 사용자/리소스 권한을 관리
- 리눅스는 사용자/그룹으로 권한을 고나리
- root는 슈퍼 관리자
- 파일마다 소유자, 소유자 그룹, 모든 사용자(기타, 모두, Anonymous)에 대해 
    - 읽고, 쓰고, 실행하는 권한을 관리
    - 각 권한에 따라 권한을 설정하고 기록한다. 

- d는 폴더를 의미 

| 권한 | 대표문자 | 파일일 때 | 폴더일 때      |
| ---- | -------- | --------- | -------------- |
| 읽기 | r        | 읽고 카피 | ls 명령어 가능 |
| 쓰기 | w        | 수정      | 파일 생성 가능 |
| 실행 | x        | 실행      | cd 접근 가능   |

**- rwx rw- r-x**

- rwx : 소유자의 권한
- rw : 그룹의 권한
- r-x : 기타 사용자의 권한 

#### 파일 권한

- 사용자
    - 소유자 : 소유자에 대한 권한
    - 그룹:  소유자가 속해 있는 그룹에 대한 권한
    - 공개 : 모든 사용자들에 대한 권한
- 퍼미션 종류, (권한 기호)
    - 읽기(r) : 읽기 권한
    - 쓰기(w) : 쓰기 권한
    - 실행(x) : 실행 권한

#### chmod : 파일 권한 변경

- 숫자를 사용하는 방법

- 소유자(u)

    | 표기 | r       | w       | x       |
    | ---- | ------- | ------- | ------- |
    | 최대 | 2^2 = 4 | 2^1 = 2 | 2^0  =1 |

    합 : 7 

- 그룹(g)

    | 표기 | r       | -       | x       |
    | ---- | ------- | ------- | ------- |
    | 최대 | 2^2 = 4 | 2^1 = 2 | 2^0  =1 |

​		합 : 5

- 기타 (o)

    | 표기 | r       | -       | -       |
    | ---- | ------- | ------- | ------- |
    | 최대 | 2^2 = 4 | 2^1 = 2 | 2^0  =1 |

​		합 : 4 

```
rwxrwxrwx = 777
r-xr-xr-x = 555
r-------- = 400
rwx------ = 700
```

```
chmod 400 my-key-pair.pem
```

- 하위 폴더 포함 모든 권한 다주기
    - chmod -R 777 directory

#### cat : 파일 보기

```
cat nginx.conf
# ngin.conf 파일 내용이 모두 출력됨 
```

#### rm : 파일 및 폴더 삭제

- 주로 사용하는 명령어 형태 : rm -rf 디렉토리 명 
- r 옵션 : 하위 디렉토리를 포함한 모든 파일 삭제
- f 옵션 : 강제로 파일이나 디렉토리 삭제

```
rm -r test/
```

- 리눅스는 휴지통이 기본적으로 없기 때문에 확인하고 사용할 것 ! 

